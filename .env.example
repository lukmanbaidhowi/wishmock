# --- Wishmock .env.example ---
# Copy this file to ".env" and adjust as needed.
# Note: ".env" is gitignored (see .gitignore).

# Core ports
HTTP_PORT=3000
GRPC_PORT_PLAINTEXT=50050
# Optional legacy fallback (used if GRPC_PORT_PLAINTEXT is unset)
GRPC_PORT=50050

# TLS / mTLS (optional)
# Enable TLS either by setting GRPC_TLS_ENABLED=true or by providing both cert+key paths.
GRPC_PORT_TLS=50051
GRPC_TLS_ENABLED=false
GRPC_TLS_CERT_PATH=certs/server.crt
GRPC_TLS_KEY_PATH=certs/server.key
# If provided, server validates client certs against this CA (mTLS)
GRPC_TLS_CA_PATH=certs/ca.crt
# Require client certificates when TLS CA is present (mTLS). true|false
GRPC_TLS_REQUIRE_CLIENT_CERT=false

# Admin API base (used by MCP helpers); defaults to http://localhost:${HTTP_PORT}
# ADMIN_BASE_URL=http://localhost:3000

# MCP (Model Context Protocol) servers (optional)
# Start stdio MCP inside Docker container at boot
ENABLE_MCP=false
# Start HTTP SSE MCP inside Docker container at boot
ENABLE_MCP_SSE=false
MCP_HTTP_HOST=127.0.0.1
MCP_HTTP_PORT=9090
# When using scripts/dev.mcp.mjs, choose transport: sse|stdio
MCP_TRANSPORT=sse

# Advanced path overrides for MCP servers (usually leave default)
# WISHMOCK_BASE_DIR=
WISHMOCK_RULES_DIR=rules/grpc
WISHMOCK_PROTOS_DIR=protos
# Override location of rule examples file used by MCP tools
WISHMOCK_RULES_EXAMPLES_PATH=docs/rule-examples.md

# Diagnostics
DEBUG_REFLECTION=0
HEALTHCHECK_URL=http://localhost:3000/liveness
HEALTHCHECK_TIMEOUT_MS=2000

# Connect RPC Configuration (browser-compatible gRPC)
# Enable Connect RPC server (supports Connect, gRPC-Web, and gRPC protocols)
CONNECT_ENABLED=true
# Port for Connect RPC server (default: 50052)
CONNECT_PORT=50052
# Enable CORS for browser clients
CONNECT_CORS_ENABLED=true
# Allowed origins for CORS (* for all, or comma-separated list)
CONNECT_CORS_ORIGINS=*
# Optional: Enable TLS for Connect RPC
CONNECT_TLS_ENABLED=false
CONNECT_TLS_CERT_PATH=certs/server.crt
CONNECT_TLS_KEY_PATH=certs/server.key
CONNECT_TLS_CA_PATH=certs/ca.crt

# Validation (request schema validation from .proto annotations)
# Feature flag: enable/disable runtime validation (default: false)
VALIDATION_ENABLED=false
# Source of validation rules: auto|pgv|buf (default: auto)
VALIDATION_SOURCE=auto
# Streaming mode: per_message|aggregate (default: per_message)
VALIDATION_MODE=per_message
