# Example rule for streaming.StreamService/GetMessages
# Copy this file to rules/grpc/ to use with the Connect client examples

- when:
    metadata: {}
    request: {}
  body:
    stream:
      - id: "msg1"
        content: "Welcome to Connect RPC streaming!"
        timestamp: 1701878400
        sender: "wishmock"
      - id: "msg2"
        content: "This is a server-side streaming example"
        timestamp: 1701878401
        sender: "wishmock"
      - id: "msg3"
        content: "Each message is sent independently"
        timestamp: 1701878402
        sender: "wishmock"
      - id: "msg4"
        content: "You can cancel the stream at any time"
        timestamp: 1701878403
        sender: "wishmock"
      - id: "msg5"
        content: "Stream completed successfully!"
        timestamp: 1701878404
        sender: "wishmock"
  priority: 1

# Rule for specific user
- when:
    metadata: {}
    request:
      user_id: "user123"
  body:
    stream:
      - id: "msg_user123_1"
        content: "Hello user123! Here are your messages."
        timestamp: 1701878400
        sender: "system"
      - id: "msg_user123_2"
        content: "You have 3 new notifications"
        timestamp: 1701878401
        sender: "system"
      - id: "msg_user123_3"
        content: "Your profile was updated"
        timestamp: 1701878402
        sender: "system"
  priority: 2
